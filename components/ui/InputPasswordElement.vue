<template>
  <div class="flex flex-col w-full relative">
    <label class="text-h p3 mb-[8px]" v-if="label" :for="type">{{ label }}</label>
    <input
      :type="inputType"
      @keydown.space.prevent
      :placeholder="placeholder ?? 'Type...'"
      :value="modelValue"
      @change="updateInput"
      :class="[
        error?.[0] ? 'border-red-500' : 'border-txt',
        'py-[12px] px-[16px] h-[44px] p4 border rounded-[100px] bg-white color-txt focus:outline-none',
      ]"
    />
    <span class="text-red-500 p4 mt-[8px] break-all">{{ error ? error[0] : errorFront }}</span>
    <div @click="toggleText" class="absolute cursor-pointer z-[1] right-[15px] top-[45px]">
      <svg
        v-if="inputType === 'password'"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
      >
        <!-- SVG for eye-closed (password hidden) -->
        <path
          d="M20.3984 19.5L5.39844 4.5M10.1984 10.4416C9.82502 10.8533 9.59844 11.394 9.59844 11.9863C9.59844 13.2761 10.673 14.3217 11.9984 14.3217C12.6096 14.3217 13.1674 14.0994 13.5911 13.7334M20.4372 14.3217C21.2635 13.0848 21.5984 12.0761 21.5984 12.0761C21.5984 12.0761 19.4138 5.1 11.9984 5.1C11.5821 5.1 11.1823 5.12199 10.7984 5.16349M17.3984 17.3494C16.021 18.2281 14.2478 18.8495 11.9984 18.8127C4.67536 18.693 2.39844 12.0761 2.39844 12.0761C2.39844 12.0761 3.45629 8.69808 6.59844 6.64332"
          stroke="#56618B"
          stroke-width="2"
          stroke-linecap="round"
        />
      </svg>
      <svg
        v-if="inputType === 'text'"
        xmlns="http://www.w3.org/2000/svg"
        width="24"
        height="24"
        viewBox="0 0 24 24"
        fill="none"
      >
        <!-- SVG for eye-open (password visible) -->
        <path
          fill-rule="evenodd"
          clip-rule="evenodd"
          d="M3.47163 12.1027C3.53686 11.9405 3.63027 11.7238 3.75524 11.4689C4.04923 10.8693 4.51186 10.0709 5.18333 9.27591C6.5144 7.70001 8.65396 6.14258 12.0001 6.14258C15.3463 6.14258 17.4859 7.70001 18.817 9.27591C19.4884 10.0709 19.9511 10.8693 20.2451 11.4689C20.3717 11.7273 20.466 11.9465 20.5313 12.1094C20.4642 12.2686 20.368 12.4819 20.2397 12.7327C19.9394 13.3197 19.4693 14.1002 18.7933 14.8739C17.4532 16.4076 15.3165 17.9094 12.0165 17.8554C8.69493 17.8011 6.544 16.2872 5.2012 14.7775C4.5243 14.0165 4.05449 13.2566 3.75502 12.6883C3.63161 12.4541 3.53808 12.2542 3.47163 12.1027ZM21.6001 12.1187C22.5544 11.8199 22.5543 11.8194 22.5541 11.8189L22.5538 11.8177L22.5529 11.815L22.5505 11.8075L22.5432 11.7851C22.5372 11.7668 22.5288 11.742 22.5181 11.7112C22.4966 11.6495 22.4654 11.5634 22.4237 11.4563C22.3405 11.2424 22.215 10.9437 22.0408 10.5884C21.6935 9.88002 21.1465 8.93442 20.3449 7.98537C18.7298 6.07321 16.0693 4.14258 12.0001 4.14258C7.93095 4.14258 5.27051 6.07321 3.65542 7.98537C2.85382 8.93442 2.30683 9.88002 1.95948 10.5884C1.78528 10.9437 1.65979 11.2424 1.57656 11.4563C1.5349 11.5634 1.50372 11.6495 1.48222 11.7112C1.47146 11.742 1.46312 11.7668 1.4571 11.7851L1.44978 11.8075L1.44739 11.815L1.44651 11.8177L1.44615 11.8189C1.446 11.8194 1.44585 11.8199 2.40015 12.1187L1.44585 11.8199L1.34766 12.1334L1.45457 12.4441L2.40015 12.1187C1.45457 12.4441 1.45473 12.4446 1.4549 12.4451L1.4553 12.4462L1.45625 12.449L1.45881 12.4562L1.46657 12.478C1.47294 12.4956 1.48171 12.5193 1.49296 12.5489C1.51547 12.608 1.54796 12.6903 1.59117 12.7925C1.67751 12.9968 1.80704 13.2817 1.98566 13.6207C2.34195 14.2968 2.89907 15.1986 3.70678 16.1067C5.33321 17.9353 7.98229 19.7897 11.9838 19.8552C16.0068 19.921 18.6702 18.0545 20.2993 16.1899C21.1079 15.2645 21.6648 14.3384 22.0202 13.6436C22.1985 13.2951 22.3277 13.0018 22.4136 12.7916C22.4566 12.6863 22.489 12.6017 22.5113 12.541C22.5225 12.5106 22.5311 12.4862 22.5374 12.4682L22.5451 12.4461L22.5476 12.4387L22.5485 12.436L22.5489 12.4348C22.549 12.4343 22.5492 12.4339 21.6001 12.1187ZM21.6001 12.1187L22.5492 12.4339L22.6509 12.1277L22.5544 11.8199L21.6001 12.1187ZM12.0001 10.6935C11.201 10.6935 10.6001 11.317 10.6001 12.0289C10.6001 12.7408 11.201 13.3642 12.0001 13.3642C12.7993 13.3642 13.4001 12.7408 13.4001 12.0289C13.4001 11.317 12.7993 10.6935 12.0001 10.6935ZM20.6466 12.4198C20.6467 12.4202 20.6467 12.4203 20.6466 12.4199L20.6466 12.4198ZM8.60015 12.0289C8.60015 10.1613 10.1483 8.69353 12.0001 8.69353C13.852 8.69353 15.4001 10.1613 15.4001 12.0289C15.4001 13.8965 13.852 15.3642 12.0001 15.3642C10.1483 15.3642 8.60015 13.8965 8.60015 12.0289Z"
          fill="#56618B"
        />
      </svg>
    </div>
  </div>
</template>

<script setup lang="ts">
import { ref } from 'vue';

interface Props {
  modelValue: string;
  name?: string;
  type: string;
  label?: string;
  placeholder?: string;
  error?: string[];
  errorFront?: string;
}

const props = defineProps<Props>();
const emit = defineEmits(['update:modelValue']);

const inputType = ref<'password' | 'text'>('password');

const updateInput = (event: Event) => {
  const target = event.target as HTMLInputElement;
  emit('update:modelValue', target.value);
};

const toggleText = () => {
  inputType.value = inputType.value === 'password' ? 'text' : 'password';
};
</script>
